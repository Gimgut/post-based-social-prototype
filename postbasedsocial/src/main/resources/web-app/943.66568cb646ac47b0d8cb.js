"use strict";(self.webpackChunkpbs_proto=self.webpackChunkpbs_proto||[]).push([[943],{7943:(P,i,o)=>{o.r(i),o.d(i,{FeedRecentModule:()=>M});var p=o(8583),r=o(2305),e=o(7716),f=o(8002),l=o(1841),u=o(9369),a=o(6243);let F=(()=>{class t{constructor(s,c,d){this.http=s,this.postAdapter=c,this.apiRoutes=d,this.posts=[],this.isFetching=!1,this.noMorePosts=!1}addPostsAfterFetching(s){this.isFetching=!1,this.posts.push(...s),this.noMorePosts=s.length<1}fetchPosts(s){return this.isFetching=!0,this.http.get(this.apiRoutes.getFeedRecent(s)).pipe((0,f.U)(c=>this.postAdapter.adaptArr(c)))}fetchFirstPosts(){this.fetchPosts("").subscribe(s=>this.addPostsAfterFetching(s))}fetchMorePosts(){let s=this.posts[this.posts.length-1].id.toString();this.fetchPosts(s).subscribe(c=>this.addPostsAfterFetching(c))}getPosts(){return this.posts.length<1&&this.fetchFirstPosts(),this.posts}tryFetchMore(){this.isFetching||(this.posts.length<1?this.fetchFirstPosts():this.fetchMorePosts())}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(l.eN),e.LFG(u.f),e.LFG(a.M))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var m=o(6334),h=o(1095);const g=[{path:"",component:(()=>{class t{constructor(s){this.feedRecentService=s,this.posts=[]}ngOnInit(){this.posts=this.feedRecentService.getPosts()}fetchMore(){this.feedRecentService.tryFetchMore()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(F))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-feed-recent"]],decls:7,vars:1,consts:[[3,"posts"],[1,"div-flex"],[1,"margin-centre-horiz"],["mat-button","",1,"bg-blue-1",3,"click"]],template:function(s,c){1&s&&(e.TgZ(0,"h2"),e._uU(1,"New posts!"),e.qZA(),e._UZ(2,"app-feed",0),e.TgZ(3,"div",1),e.TgZ(4,"div",2),e.TgZ(5,"button",3),e.NdJ("click",function(){return c.fetchMore()}),e._uU(6,"Fetch more"),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.Q6J("posts",c.posts))},directives:[m.e,h.lW],styles:[""]}),t})()}];let R=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[r.Bz.forChild(g)],r.Bz]}),t})();var v=o(3430);let M=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.ez,R,v.m,h.ot]]}),t})()}}]);