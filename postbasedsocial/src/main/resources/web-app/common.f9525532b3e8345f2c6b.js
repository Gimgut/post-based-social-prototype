"use strict";(self.webpackChunkpbs_proto=self.webpackChunkpbs_proto||[]).push([[592],{6334:(_,l,o)=>{o.d(l,{e:()=>d});var t=o(7716),c=o(8583),h=o(7019);function p(a,u){1&a&&t._UZ(0,"app-post",2),2&a&&t.Q6J("post",u.$implicit)}let d=(()=>{class a{constructor(){}ngOnInit(){}addPost(n){this.posts.push(n)}addPosts(n){this.posts.push(...n)}}return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-feed"]],inputs:{posts:"posts"},decls:2,vars:1,consts:[[1,"width-100"],[3,"post",4,"ngFor","ngForOf"],[3,"post"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0),t.YNc(1,p,1,1,"app-post",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngForOf",r.posts))},directives:[c.sg,h.A],styles:[".width-100[_ngcontent-%COMP%]{width:100%}"]}),a})()},7019:(_,l,o)=>{o.d(l,{A:()=>a});var t=o(7716),c=o(15),h=o(8583);const p=function(u){return["/user",u]},d=function(u){return["/post",u]};let a=(()=>{class u{constructor(){this.post=null}ngOnInit(){}}return u.\u0275fac=function(r){return new(r||u)},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-post"]],inputs:{post:"post"},decls:17,vars:13,consts:[[1,"post"],[1,"post-header"],[1,"post-author"],[3,"routerLink"],[1,"post-date"],[1,"txt-normal"],[1,"post-title"],[1,"txt-black-2",3,"routerLink"],[1,"post-body"],[1,"post-content","break-newline",3,"innerHTML"],[1,"post-footer"]],template:function(r,s){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"a",3),t.TgZ(4,"h5"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",4),t.TgZ(7,"h5",5),t._uU(8),t.ALo(9,"date"),t.qZA(),t.qZA(),t.TgZ(10,"div",6),t.TgZ(11,"h2"),t.TgZ(12,"a",7),t._uU(13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",8),t._UZ(15,"div",9),t.qZA(),t._UZ(16,"div",10),t.qZA()),2&r&&(t.xp6(3),t.Q6J("routerLink",t.VKq(9,p,null==s.post||null==s.post.author?null:s.post.author.id)),t.xp6(2),t.Oqu(null==s.post||null==s.post.author?null:s.post.author.username),t.xp6(3),t.Oqu(t.xi3(9,6,null==s.post?null:s.post.createdAt,"short")),t.xp6(4),t.Q6J("routerLink",t.VKq(11,d,null==s.post?null:s.post.id)),t.xp6(1),t.Oqu(null==s.post?null:s.post.title),t.xp6(2),t.Q6J("innerHTML",null==s.post?null:s.post.content,t.oJD))},directives:[c.yS],pipes:[h.uU],styles:["h2[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]{margin:0;padding:0}h5[_ngcontent-%COMP%]{margin:0;padding:0}.post[_ngcontent-%COMP%]{background-color:#fff;padding:.5em;margin-top:.2em}.post-header[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.post-author[_ngcontent-%COMP%]{display:inline-block;margin-right:1em;margin-bottom:0}.post-date[_ngcontent-%COMP%]{display:inline-block}.post-body[_ngcontent-%COMP%]{text-align:justify}.txt-normal[_ngcontent-%COMP%]{text-decoration:none;font-weight:normal}"]}),u})()},5552:(_,l,o)=>{o.d(l,{L:()=>n});var t=o(7716),c=o(1011),h=o(1544),p=o(8583),d=o(1095);function a(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().subscribe()}),t._uU(1,"Subscribe"),t.qZA()}}function u(r,s){if(1&r){const e=t.EpF();t.TgZ(0,"button",1),t.NdJ("click",function(){return t.CHM(e),t.oxw().unsubscribe()}),t._uU(1,"Unsubscribe"),t.qZA()}}let n=(()=>{class r{constructor(e,i){this.subscriptionService=e,this.authService=i,this._author=void 0,this.isSubscribed=void 0,this.httpPending=!1,this.isAuthorized=!1,this.isAuthorized=i.isAuthenticated}ngOnInit(){}set author(e){this._author=e,e&&this.refreshSubscribedStatus()}get author(){return this._author}setAuthor(e){this.author=e,this.refreshSubscribedStatus()}isOwner(){var e,i;return!((null===(e=this.author)||void 0===e?void 0:e.id)!==(null===(i=this.authService.authenticatedUserValue)||void 0===i?void 0:i.id)||!this.author||!this.authService.authenticatedUserValue)}refreshSubscribedStatus(){!this.author||(this.isSubscribed=this.subscriptionService.checkIsSubscribed(this.author.id))}subscribe(){var e;!this.author||this.httpPending||(this.httpPending=!0,null===(e=this.subscriptionService.subscribe(this.author))||void 0===e||e.subscribe(i=>{this.isSubscribed=!0,this.refreshSubscribedStatus(),this.httpPending=!1},i=>{this.httpPending=!1}))}unsubscribe(){var e;!this.author||this.httpPending||(this.httpPending=!0,null===(e=this.subscriptionService.unsubscribe(this.author))||void 0===e||e.subscribe(i=>{this.isSubscribed=!1,this.refreshSubscribedStatus(),this.httpPending=!1},i=>{this.httpPending=!1}))}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.F),t.Y36(h.$))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-sub-buttons"]],inputs:{author:"author"},decls:2,vars:2,consts:[["mat-button","","class","bg-gray-1",3,"click",4,"ngIf"],["mat-button","",1,"bg-gray-1",3,"click"]],template:function(e,i){1&e&&(t.YNc(0,a,2,0,"button",0),t.YNc(1,u,2,0,"button",0)),2&e&&(t.Q6J("ngIf",i.isAuthorized&&!1===i.isSubscribed&&!i.isOwner()),t.xp6(1),t.Q6J("ngIf",i.isAuthorized&&!0===i.isSubscribed&&!i.isOwner()))},directives:[p.O5,d.lW],styles:[""]}),r})()},2808:(_,l,o)=>{o.d(l,{X:()=>u});var t=o(8002),c=o(7716),h=o(1841),p=o(9369);let d=(()=>{class n{constructor(s,e){this.http=s,this.postAdapter=e,this.posts=[],this.isFetching=!1,this.noMorePosts=!1,console.log("RecentFeedStrategy contructor")}addPostsAfterFetching(s){this.isFetching=!1,this.posts.push(...s),this.noMorePosts=s.length<1}fetchFirstPosts(){this.isFetching=!0,this.fetchPosts("").subscribe(s=>this.addPostsAfterFetching(s))}fetchMorePosts(){let s=this.posts[this.posts.length-1].id.toString();this.isFetching=!0,this.fetchPosts(s).subscribe(e=>this.addPostsAfterFetching(e))}getPosts(){return this.posts}tryFetchMore(){this.isFetching||(this.posts.length<1?this.fetchFirstPosts():this.fetchMorePosts())}removeAll(){this.posts.length=0}}return n.\u0275fac=function(s){return new(s||n)(c.LFG(h.eN),c.LFG(p.f))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var a=o(6243);let u=(()=>{class n extends d{constructor(s,e,i){super(s,e),this.http=s,this.postAdapter=e,this.apiRoutes=i,this.userId="",console.log("RecentService contructor")}ngOnInit(){console.log("RecentService init")}setUserId(s){this.userId=s}fetchPosts(s){return this.http.get(this.apiRoutes.getFeedRecentOfUser(this.userId,s)).pipe((0,t.U)(e=>this.postAdapter.adaptArr(e)))}}return n.\u0275fac=function(s){return new(s||n)(c.LFG(h.eN),c.LFG(p.f),c.LFG(a.M))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}]);